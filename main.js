let form=document.querySelector("form"),input=document.querySelector("form input"),tasksDiv=document.querySelector(".tasks"),arr=[];"undefined"!=localStorage.tasksTodo&&null!=localStorage.tasksTodo&&(arr=JSON.parse(localStorage.tasksTodo)),addTasksToPage(arr),addDataToCompletedSection(),form.onsubmit=function(e){if(e.preventDefault(),""!=input.value){addTaskToArray(createTask(input.value),arr),addArrayToLocalStorage(arr),addTasksToPage(arr),addDataToCompletedSection(),input.value=""}},updateTask(),deleteTaks();let mood=document.querySelector(".mood");mood.onclick=function(){changeMood(),mood.classList.toggle("fa-moon"),mood.classList.toggle("fa-sun"),document.querySelectorAll(".check").forEach(((e,t)=>{mood.classList.contains("fa-moon")?e.style.border="2px solid black":e.style.border="2px solid white"}))},document.documentElement.addEventListener("click",(function(e){e.target.classList.contains("clear-all")&&(arr.length=0,addArrayToLocalStorage(arr),addTasksToPage(arr))})),document.documentElement.addEventListener("click",(function(e){if(e.target.classList.contains("check-task")){let t=e.target.parentNode.parentNode.id;e.target.parentNode.parentNode.dataset.completed;for(let e=0;e<arr.length;e++)arr[e].id==t&&(arr[e].completed=!0,addTasksToPage(arr),addDataToCompletedSection(),addArrayToLocalStorage(arr))}}));let activeBtn=document.querySelector(".controls .active-page"),completedBtn=document.querySelector(".completed-page"),sections=document.querySelectorAll(".section");function handelLinks(e){sections.forEach(((e,t)=>{e.style.display="none"})),document.querySelector(e.dataset.display).style.display="block",document.querySelectorAll(".controls .link").forEach(((e,t)=>{e.style.color="var(--text-color)"})),e.style.color="var(--active-color)"}function updateTask(){document.documentElement.addEventListener("click",(function(e){if(input.focus(),e.target.classList.contains("fa-pen")){let t=e.target.parentNode.parentNode.id;for(let e=0;e<arr.length;e++)if(arr[e].id==t){input.value=arr[e].content,arr.splice(e,1),addArrayToLocalStorage(arr);break}}}))}function deleteTaks(){document.documentElement.addEventListener("click",(function(e){if(e.target.classList.contains("fa-trash")){let t=e.target.parentNode.parentNode.id;for(let e=0;e<arr.length;e++)arr[e].id==t&&(arr.splice(e,1),addArrayToLocalStorage(arr),addTasksToPage(arr))}}))}function addTasksToPage(e){console.log(e);let t=e.filter((e=>0==e.completed));console.log(t),tasksDiv.innerHTML="";for(let o=0;o<t.length;o++){let a=`\n     <div class="task" id=${t[o].id} data-completed=${e[o].completed}>\n         <div class="content">\n             <div class="check-task">\n\n             </div>\n             <p class="text">${t[o].content}</p>\n         </div>\n\n         <div class="icons">\n            <i class="fa fa-pen"></i>\n            <i class="fa fa-trash"></i>\n\n         </div>\n\n\n\n     </div>\n     `;tasksDiv.innerHTML+=a}}function addDataToCompletedSection(){let e=arr.filter((e=>1==e.completed));document.querySelector(".completed-section").innerHTML="";for(let t=0;t<e.length;t++)document.querySelector(".completed-section").innerHTML+=`\n        <div class="task-complete" id=${e[t].id}>\n            <div class="content">\n\n                <p class="text">${e[t].content}</p>\n            </div>\n\n            <div class="icons">\n               <i class="fa fa-undo return "></i>\n\n\n            </div>\n\n\n\n        </div>\n\n\n          `}function changeMood(){mood.classList.contains("fa-sun")?(document.documentElement.style.setProperty("--seconary-color","#f6f6f6"),document.documentElement.style.setProperty("--text-color","black"),document.documentElement.style.setProperty("--task-color","white")):(document.documentElement.style.setProperty("--seconary-color","#181824"),document.documentElement.style.setProperty("--text-color","white"),document.documentElement.style.setProperty("--task-color","#25273c"))}function createTask(e){return{content:e,completed:!1,id:8100001010*Math.random()}}function addTaskToArray(e,t){t.push(e)}function addArrayToLocalStorage(e){localStorage.setItem("tasksTodo",JSON.stringify(e))}activeBtn.addEventListener("click",(function(){handelLinks(this)})),completedBtn.addEventListener("click",(function(){handelLinks(this)})),document.documentElement.addEventListener("click",(function(e){if(e.target.classList.contains("return")){let t=e.target.parentNode.parentNode.id;for(let e=0;e<arr.length;e++)arr[e].id==t&&(arr[e].completed=!1,addTasksToPage(arr),addDataToCompletedSection(),addArrayToLocalStorage(arr))}}));
